angular.module("BootstrapAddons",["BootstrapAddonsTemplateCache"]),angular.module("BootstrapAddons").directive("timeslider",["$document","$timeout",function(t,e){const n="timesliderSvg",a=72;return{restrict:"E",scope:{end:"=",onClear:"&",onChange:"&",start:"=",ticks:"@",width:"@"},templateUrl:"timeslider/timeslider.html",replace:!0,link:function(t,i,r){function s(){e(m.extent()[0].getTime()===m.extent()[1].getTime()?function(){t.onClear()()}:function(){t.onChange()(m.extent()[0],m.extent()[1])})}function c(t,e){m.extent([t,e]),m(d3.select(".brush")),m.event(d3.select(".brush"))}function l(){t.actionIcon="glyphicon-play",h&&(clearInterval(h),h=null)}function o(){t.actionIcon="glyphicon-pause",h=setInterval(function(){t.stepForward()},1e3)}function d(){var e=m.extent()[1].getTime()-m.extent()[0].getTime();return 0>=e&&(e=(t.end.getTime()-t.start.getTime())/45),e}function p(){var t=m.extent();g(),t[0].getTime()!==t[1].getTime()&&(m.extent([t[0],t[1]]),m(d3.select(".brush")))}function g(){u&&(t.width=i[0].clientWidth-a),t.width<=0&&(t.width=144);var e=d3.select("#timesliderContainer");e.selectAll("#"+n).remove();var r=e.append("svg").attr("id",n).attr("width",t.width).attr("height",22);r.append("g").append("rect").attr("x",0).attr("y",0).attr("width",t.width).attr("height",22).attr("class","timeslider");var c=d3.time.scale.utc().domain([t.start.getTime(),t.end.getTime()]).range([0,parseInt(t.width,10)]);c.ticks(parseInt(t.ticks,10)).forEach(function(t,e){if(r.append("line").attr("class","scaleLine").attr("x1",c(t)).attr("x2",c(t)).attr("y1",0).attr("y2",22),e%2!=0){var n=t.getUTCHours();10>n&&(n="0"+n),r.append("text").attr("class","scaleLabel").attr("x",c(t)).attr("dx","-1.25em").attr("y",11).attr("text-anchor","left").attr("dominant-baseline","middle").text(n);var a=t.getUTCMinutes();10>a&&(a="0"+a),r.append("text").attr("class","scaleLabel").attr("x",c(t)).attr("dx","0.25em").attr("y",11).attr("text-anchor","right").attr("dominant-baseline","middle").text(a)}}),m=d3.svg.brush().x(c).on("brushend",s),r.append("g").attr("class","brush").call(m).selectAll("rect").attr("height",22)}var m,u=!1;t.width||(u=!0),t.actionIcon="glyphicon-play";var h=null;g(),t.$watch("end",function(e,n){e.getTime()!==n.getTime()&&(t.end=e,p())},!0),t.$on("timesliderForceRender",function(){p()}),t.togglePlay=function(){h?l():o()},t.stepBack=function(){var e=new Date(m.extent()[0].getTime()-d()),n=m.extent()[0];n.getTime()<=t.start.getTime()&&(e=new Date(t.end.getTime()-d()),n=t.end),c(e,n)},t.stepForward=function(){var e=m.extent()[1],n=new Date(m.extent()[1].getTime()+d());e.getTime()>=t.end.getTime()&&(e=t.start,n=new Date(t.start.getTime()+d())),c(e,n)}}}}]),angular.module("BootstrapAddonsTemplateCache",[]).run(["$templateCache",function(t){t.put("timeslider/timeslider.html",'<div><div class="btn-group"><button class="btn btn-xs btn-primary" ng-click="togglePlay()"><span class="glyphicon {{actionIcon}}"></span></button> <button class="btn btn-xs btn-primary" ng-click="stepBack()"><span class="glyphicon glyphicon-step-backward"></span></button> <button class="btn btn-xs btn-primary" ng-click="stepForward()"><span class="glyphicon glyphicon-step-forward"></span></button> <span id="timesliderContainer"></span></div></div>')}]);